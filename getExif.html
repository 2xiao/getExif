<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<script type="text/javascript" src="exif.js"></script>
<style type="text/css">
	.image1{
		width: 200px;
		height: 300px;
		padding-left: 10px;
	}
	#output{
		background-color: lightblue;
		width: 100%;
		height: 500px;
		font-size: 30px;
	}
</style>
</head>
<body>
	<h3>选取本地图片，获取版权信息：</h3>
	<input id="file-input" type="file" />
	<h3>点击图片，获取版权信息：</h3>
	<div>
		<img src="./image/y/WechatIMG17.jpeg" class="image1">
		<img src="./image/y/1120962301_14945661020831n.jpg" class="image1">		
		<img src="./image/y/1120972345_1494810940752_title0h.jpg" class="image1">
		<img src="./image/y/7882500119735970833.jpg" class="image1">	
		<img src="./image/y/WechatIMG19.jpeg" class="image1">		
	</div>
	<h3>版权信息：</h3>
	<p id="output"></p>
	<script>
	document.getElementById("file-input").onchange = function(e) {
	    EXIF.getData(e.target.files[0], function() {
	        var IptcObject = EXIF.getAllIptcTags(this);
	        var IptcString = "";
	        for(var tag in IptcObject){
	        	var IptcText = IptcObject[tag];
	        	IptcString += tag + " = " + IptcText + "<br>";
	        }
	        document.getElementById("output").innerHTML = IptcString;
	    });
	}
	var img = document.getElementsByClassName("image1");
	for(var i = 0 ; i < img.length ; i++){
		img[i].onclick = function(e) {
		    EXIF.getData(e.target, function() {
		        var IptcObject = EXIF.getAllIptcTags(this);
		        var IptcString = "";
		        for(var tag in IptcObject){
		        	var IptcText = IptcObject[tag];
		        	IptcString += tag + " = " + IptcText + "<br>";
		        }
		        document.getElementById("output").innerHTML = IptcString;
		    });
		}
	}
	
	var htmlentities = {
			/**
			 * Converts a string to its html characters completely.
			 *
			 * @param {String} str String with unescaped HTML characters
			 **/
			encode : function(str) {
				var buf = [];
				
				for (var i=str.length-1;i>=0;i--) {
					buf.unshift(['&#', str[i].charCodeAt(), ';'].join(''));
				}
				
				return buf.join('');
			},
			/**
			 * Converts an html characterSet into its original character.
			 *
			 * @param {String} str htmlSet entities
			 **/
			decode : function(str) {
				return str.replace(/&#(\d+);/g, function(match, dec) {
					return String.fromCharCode(dec);
				});
			}
		};
	</script>
</body>
</html>